{% extends 'base.html' %}

{% block title %}Detalle de Incidencia{% endblock %}

{% block content %}
<div class="card shadow-sm p-4">
    <h2 class="mb-4">Detalle de incidencia</h2>

    <p><strong>ID:</strong> {{ incidencia.id }}</p>
    <p><strong>Resumen:</strong> {{ incidencia.resumen }}</p>
    <p><strong>Descripci√≥n:</strong> {{ incidencia.descripcion }}</p>
    <p><strong>Servicio:</strong> {{ incidencia.servicio }}</p>
    <p><strong>Usuario asignado:</strong> {{ incidencia.usuario }}</p>
    <p><strong>Fecha deseada:</strong> {{ incidencia.fecha_deseada }}</p>

    <form method="POST" action="/editar/{{ incidencia.id }}">
        <div class="mb-3">
            <label class="form-label">Actualizar prioridad</label>
            <select name="prioridad" class="form-select">
                <option value="Baja" {% if incidencia.prioridad == "Baja" %}selected{% endif %}>Baja</option>
                <option value="Media" {% if incidencia.prioridad == "Media" %}selected{% endif %}>Media</option>
                <option value="Alta" {% if incidencia.prioridad == "Alta" %}selected{% endif %}>Alta</option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Actualizar estado</label>
            <select name="estado" class="form-select">
                <option value="Pendiente" {% if incidencia.estado == "Pendiente" %}selected{% endif %}>Pendiente</option>
                <option value="Asignado" {% if incidencia.estado == "Asignado" %}selected{% endif %}>Asignado</option>
                <option value="En curso" {% if incidencia.estado == "En curso" %}selected{% endif %}>En curso</option>
                <option value="Resuelto" {% if incidencia.estado == "Resuelto" %}selected{% endif %}>Resuelto</option>
                <option value="Cerrado" {% if incidencia.estado == "Cerrado" %}selected{% endif %}>Cerrado</option>
                <option value="Cancelado" {% if incidencia.estado == "Cancelado" %}selected{% endif %}>Cancelado</option>
            </select>
        </div>

        <!-- Campo Grupo dentro del formulario -->
        <div class="mb-3">
            <label class="form-label">Actualizar grupo</label>
            <select name="grupo" class="form-select">
                <option value="sistemas" {% if incidencia.grupo == "sistemas" %}selected{% endif %}>Sistemas</option>
                <option value="central" {% if incidencia.grupo == "central" %}selected{% endif %}>Central</option>
                <option value="puestoN2" {% if incidencia.grupo == "puestoN2" %}selected{% endif %}>Puesto N2</option>
                <option value="puestoN1" {% if incidencia.grupo == "puestoN1" %}selected{% endif %}>Puesto N1</option>
            </select>
        </div>

        <button type="submit" class="btn btn-primary">Guardar cambios</button>
        <a href="/incidencias" class="btn btn-secondary">Volver</a>
    </form>
</div>
{% endblock %}