<!DOCTYPE html>
<html>
<head>
    <title>Editar incidencia</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-5">
    <div class="card shadow-sm p-4">
        <h2 class="mb-4">Editar incidencia</h2>

        <form method="POST" action="/editar/{{ incidencia.id }}">
            <div class="mb-3">
                <label class="form-label">Resumen del problema</label>
                <input type="text" name="resumen" class="form-control" value="{{ incidencia.resumen }}" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Servicio</label>
                <input type="text" name="servicio" class="form-control" value="{{ incidencia.servicio }}" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Prioridad</label>
                <select name="prioridad" class="form-select" required>
                    <option value="Baja" {% if incidencia.prioridad == "Baja" %}selected{% endif %}>Baja</option>
                    <option value="Media" {% if incidencia.prioridad == "Media" %}selected{% endif %}>Media</option>
                    <option value="Alta" {% if incidencia.prioridad == "Alta" %}selected{% endif %}>Alta</option>
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">Estado</label>
                <select name="estado" class="form-select" required>
                    <option value="Pendiente" {% if incidencia.estado == "Pendiente" %}selected{% endif %}>Pendiente</option>
                    <option value="Asignado" {% if incidencia.estado == "Asignado" %}selected{% endif %}>Asignado</option>
                    <option value="En curso" {% if incidencia.estado == "En curso" %}selected{% endif %}>En curso</option>
                    <option value="Resuelto" {% if incidencia.estado == "Resuelto" %}selected{% endif %}>Resuelto</option>
                    <option value="Cerrado" {% if incidencia.estado == "Cerrado" %}selected{% endif %}>Cerrado</option>
                    <option value="Cancelado" {% if incidencia.estado == "Cancelado" %}selected{% endif %}>Cancelado</option>
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">Usuario asignado</label>
                <input type="text" class="form-control" value="{{ incidencia.usuario }}" disabled>
            </div>

            <div class="mb-3">
                <label class="form-label">Fecha deseada</label>
                <input type="date" name="fecha_deseada" class="form-control" value="{{ incidencia.fecha_deseada }}" required>
            </div>

            <button type="submit" class="btn btn-primary">Guardar cambios</button>
            <a href="/incidencias" class="btn btn-secondary">Cancelar</a>
        </form>
    </div>
</div>

</body>
</html>